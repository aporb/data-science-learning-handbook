{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://data-science-handbook.org/schemas/chapter.json",
  "title": "Chapter Content Schema",
  "description": "JSON Schema for validating chapter content metadata and structure",
  "type": "object",
  "required": [
    "title",
    "chapter_id", 
    "author",
    "created_date",
    "content_type",
    "platforms",
    "learning_objectives"
  ],
  "properties": {
    "title": {
      "type": "string",
      "minLength": 5,
      "maxLength": 100,
      "description": "The title of the chapter"
    },
    "chapter_id": {
      "type": "string",
      "pattern": "^[0-9]{2}-[a-z0-9-]+$",
      "description": "Unique chapter identifier (e.g., '01-introduction')"
    },
    "author": {
      "type": "string",
      "minLength": 2,
      "maxLength": 100,
      "description": "Author name or identifier"
    },
    "created_date": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 date-time when content was created"
    },
    "modified_date": {
      "type": "string", 
      "format": "date-time",
      "description": "ISO 8601 date-time when content was last modified"
    },
    "status": {
      "type": "string",
      "enum": ["draft", "review", "approved", "published", "archived"],
      "default": "draft",
      "description": "Current status of the content"
    },
    "content_type": {
      "type": "string",
      "enum": ["chapter", "section", "exercise", "notebook"],
      "description": "Type of educational content"
    },
    "review_stage": {
      "type": ["string", "null"],
      "enum": ["technical", "educational", "bias_assessment", "security", "final_approval", null],
      "description": "Current review stage if in review"
    },
    "learning_objectives": {
      "type": "array",
      "minItems": 1,
      "maxItems": 10,
      "items": {
        "type": "string",
        "minLength": 10,
        "maxLength": 200
      },
      "description": "List of learning objectives for this content"
    },
    "prerequisites": {
      "type": "array",
      "maxItems": 15,
      "items": {
        "type": "string",
        "minLength": 5,
        "maxLength": 200
      },
      "description": "Prerequisites for understanding this content"
    },
    "difficulty_level": {
      "type": "string",
      "enum": ["beginner", "intermediate", "advanced", "expert"],
      "default": "intermediate",
      "description": "Target difficulty level"
    },
    "estimated_time": {
      "type": "string",
      "pattern": "^[0-9]+-?[0-9]*\\s*(minute|hour|day)s?$",
      "description": "Estimated time to complete (e.g., '2-3 hours')"
    },
    "platforms": {
      "type": "array",
      "minItems": 1,
      "maxItems": 5,
      "items": {
        "type": "string",
        "enum": ["python", "r", "sql", "scala", "julia", "spark", "general"]
      },
      "description": "Target platforms or languages"
    },
    "tools_required": {
      "type": "array",
      "maxItems": 20,
      "items": {
        "type": "string",
        "minLength": 2,
        "maxLength": 50
      },
      "description": "Required tools, libraries, or software"
    },
    "datasets": {
      "type": "array",
      "maxItems": 10,
      "items": {
        "type": "object",
        "required": ["name", "source", "description"],
        "properties": {
          "name": {
            "type": "string",
            "minLength": 2,
            "maxLength": 100
          },
          "source": {
            "type": "string",
            "format": "uri"
          },
          "description": {
            "type": "string",
            "minLength": 10,
            "maxLength": 500
          },
          "format": {
            "type": "string",
            "enum": ["csv", "json", "parquet", "excel", "sql", "other"]
          },
          "size": {
            "type": "string",
            "pattern": "^[0-9]+(\\.[0-9]+)?\\s*(KB|MB|GB|TB|rows?)$"
          }
        }
      },
      "description": "Datasets used in this content"
    },
    "tags": {
      "type": "array",
      "maxItems": 15,
      "items": {
        "type": "string",
        "minLength": 2,
        "maxLength": 30,
        "pattern": "^[a-z0-9-]+$"
      },
      "description": "Content tags for categorization"
    },
    "categories": {
      "type": "array",
      "maxItems": 5,
      "items": {
        "type": "string",
        "enum": [
          "fundamentals",
          "data-acquisition",
          "data-processing", 
          "machine-learning",
          "deep-learning",
          "visualization",
          "deployment",
          "ethics",
          "advanced"
        ]
      },
      "description": "Content categories"
    },
    "dependencies": {
      "type": "array",
      "maxItems": 10,
      "items": {
        "type": "string",
        "pattern": "^[0-9]{2}-[a-z0-9-]+$"
      },
      "description": "Chapter dependencies (other chapter IDs)"
    },
    "validation_score": {
      "type": ["number", "null"],
      "minimum": 0,
      "maximum": 100,
      "description": "Automated validation score (0-100)"
    },
    "bias_score": {
      "type": ["number", "null"],
      "minimum": 0,
      "maximum": 100,
      "description": "Bias assessment score (lower is better)"
    },
    "reviewers": {
      "type": "array",
      "maxItems": 5,
      "items": {
        "type": "string",
        "minLength": 2,
        "maxLength": 100
      },
      "description": "List of reviewers"
    },
    "word_count": {
      "type": "integer",
      "minimum": 0,
      "description": "Total word count (calculated)"
    },
    "code_blocks": {
      "type": "integer", 
      "minimum": 0,
      "description": "Number of code blocks (calculated)"
    },
    "exercises": {
      "type": "integer",
      "minimum": 0, 
      "description": "Number of exercises (calculated)"
    },
    "links": {
      "type": "integer",
      "minimum": 0,
      "description": "Number of links (calculated)"
    },
    "content_hash": {
      "type": ["string", "null"],
      "pattern": "^[a-f0-9]{32}$",
      "description": "MD5 hash of content for change tracking"
    },
    "last_validated": {
      "type": ["string", "null"],
      "format": "date-time",
      "description": "Last validation timestamp"
    }
  },
  "additionalProperties": false,
  "examples": [
    {
      "title": "Introduction to Data Science",
      "chapter_id": "01-introduction",
      "author": "Data Science Team",
      "created_date": "2025-01-15T10:00:00Z",
      "modified_date": "2025-01-20T15:30:00Z",
      "status": "published",
      "content_type": "chapter",
      "learning_objectives": [
        "Understand the fundamentals of data science",
        "Learn about the data science workflow",
        "Identify key tools and technologies"
      ],
      "prerequisites": [
        "Basic statistics knowledge",
        "Programming fundamentals"
      ],
      "difficulty_level": "beginner",
      "estimated_time": "2-3 hours",
      "platforms": ["python", "r"],
      "tags": ["introduction", "fundamentals", "overview"],
      "categories": ["fundamentals"],
      "validation_score": 92.5,
      "bias_score": 15.2
    }
  ]
}